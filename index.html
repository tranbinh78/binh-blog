<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Binh Blog | Chia s·∫ª ti·∫øng Anh, l·∫≠p tr√¨nh & cu·ªôc s·ªëng</title>

  <meta name="description" content="Blog chia s·∫ª ki·∫øn th·ª©c ti·∫øng Anh, l·∫≠p tr√¨nh & cu·ªôc s·ªëng." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600;700&display=swap" rel="stylesheet">

  <link rel="icon" type="image/x-icon" href="/binh-blog/favicon.ico">

  <style>
    body {
      font-family: "Be Vietnam Pro", sans-serif;
      margin: 0;
      background: #fffdf9;
      color: #333;
    }

    header {
      background: #d7f3e3;
      padding: 20px;
      text-align: center;
      border-bottom: 2px solid #cde7ff;
    }

    nav a {
      margin: 0 12px;
      text-decoration: none;
      font-weight: 600;
      color: #333;
    }

    nav a:hover { background: #cde7ff; }

    #hamburger {
      display: none;
      font-size: 30px;
      cursor: pointer;
      padding: 8px 10px;
      background: #cde7ff;
      border-radius: 8px;
      width: fit-content;
      margin: 10px auto;
    }

    @media(max-width:768px){
      #hamburger { display: block; }
      nav { display:none; flex-direction: column; }
      nav.show { display:flex; }
      nav a { padding:10px; margin:5px 0; background:#f3eaff; }
    }

    /* Cards */
    .post-card {
      display: flex;
      background: #ffffff;
      border-radius: 14px;
      border: 1px solid #ddd;
      margin: 20px 0;
      overflow: hidden;
    }
    .post-card img { width: 200px; object-fit: cover; }
    .post-info { padding: 15px; }

    /* Search */
    #search-wrapper{ position:relative; max-width:500px; margin:auto; }
    #search{ width:100%; padding:10px; border-radius:8px; border:1px solid #bbb; }
    #suggest-list{
      position:absolute; width:100%;
      background:white; border-radius:8px; border:1px solid #ccc;
      display:none; list-style:none; max-height:230px; overflow-y:auto;
    }
    #suggest-list li{ padding:8px 12px; cursor:pointer; }
    #suggest-list li:hover{ background:#eef; }

    /* Pagination */
    #pagination{ text-align:center; margin:20px 0; }
    .page-btn{
      padding:8px 14px; margin:4px;
      border-radius:6px; cursor:pointer;
      background:#f5eaff; border:1px solid #ccb7ff;
    }
    .page-btn.active{ background:#d7caff; font-weight:700; }

    /* Dark mode */
    body.dark{ background:#111; color:white; }
    body.dark header{ background:#222; }
    body.dark nav a{ color:white; }
    body.dark .post-card{ background:#333; border-color:#555; }

  </style>
</head>

<body>
<header>
  <h1>Binh Blog</h1>
  <p>Chia s·∫ª ki·∫øn th·ª©c ti·∫øng Anh, l·∫≠p tr√¨nh v√† cu·ªôc s·ªëng</p>

  <div id="hamburger">‚ò∞</div>

  <nav>
    <a href="#" onclick="loadPosts()">Home</a>
    <a href="#" onclick="loadPosts('Ti·∫øng Anh')">Ti·∫øng Anh</a>
    <a href="#" onclick="loadPosts('L·∫≠p tr√¨nh')">L·∫≠p tr√¨nh</a>
    <a href="#" onclick="loadPosts('Cu·ªôc s·ªëng')">Cu·ªôc s·ªëng</a>
    <a href="/binh-blog/about.html">About</a>
    <a href="/binh-blog/contact.html">Contact</a>
  </nav>

  <button id="theme-toggle">Dark Mode</button>
</header>

<main>

<div id="search-wrapper">
  <input type="text" id="search" placeholder="T√¨m b√†i vi·∫øt...">
  <ul id="suggest-list"></ul>
</div>

<div id="post-list">
  <p>ƒêang t·∫£i b√†i vi·∫øt...</p>
</div>

<div id="pagination"></div>

</main>

<footer>
  ¬©2025 ‚Äî Binh Blog
</footer>

<style>
/* ===== RESET ===== */
html { scroll-behavior: smooth; }
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: "Be Vietnam Pro", sans-serif;
  background: #fffdf9;
  color: #333;
  line-height: 1.85;
}

/* ===== HEADER ===== */
header {
  background: #d7f3e3;
  padding: 20px;
  text-align: center;
  border-bottom: 2px solid #cde7ff;
}

header h1 { font-size: 28px; margin-bottom: 10px; }
header p { font-size: 16px; color: #666; }

nav a {
  margin: 0 12px;
  text-decoration: none;
  color: #333;
  padding: 6px 10px;
  border-radius: 6px;
}
nav a:hover { background: #cde7ff; }

/* ===== HAMBURGER MENU ===== */
#hamburger {
  display: none;
  font-size: 30px;
  cursor: pointer;
  padding: 8px 12px;
  background: #cde7ff;
  border-radius: 8px;
  width: fit-content;
  margin: 10px auto;
}

@media (max-width: 768px) {
  #hamburger { display: block; }

  nav {
    display: none;
    flex-direction: column;
    background: #fff;
    border: 1px solid #dcd3ff;
    padding: 15px;
    margin-top: 10px;
    border-radius: 12px;
  }

  nav.show { display: flex; }
  nav a {
    background: #f3eaff;
    margin: 6px 0;
    text-align: center;
  }
}

/* ===== POSTS ===== */
main {
  max-width: 800px;
  margin: 40px auto;
  padding: 0 15px;
}

.post-card {
  display: flex;
  background: #fff;
  border: 1px solid #e0d8ff;
  border-radius: 14px;
  overflow: hidden;
  margin-bottom: 28px;
  transition: 0.3s;
}

.post-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(120, 90, 255, 0.12);
}

.post-card img {
  width: 180px;
  object-fit: cover;
}

.post-info { padding: 16px; }
.post-info h2 { margin-bottom: 8px; font-size: 20px; }
.post-info .desc { color: #666; margin-bottom: 6px; }
.post-info .date { color: #999; font-size: 13px; }

a.btn {
  background: #d7caff;
  padding: 10px 18px;
  border-radius: 10px;
  text-decoration: none;
  color: #333;
  font-weight: 600;
}
a.btn:hover { background: #c9b3ff; }

/* MOBILE FIX */
@media (max-width:768px) {
  .post-card { flex-direction: column; text-align: center; }
  .post-card img { width: 100%; }
}

/* ===== SEARCH BOX ===== */
#search-wrapper { position: relative; margin-bottom: 12px; }
#search {
  width: 100%;
  padding: 10px 14px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 16px;
}

#suggest-list {
  position: absolute;
  top: 45px;
  left: 0;
  width: 100%;
  background: white;
  border: 1px solid #ddd;
  list-style: none;
  border-radius: 8px;
  display: none;
  max-height: 220px;
  overflow-y: auto;
  z-index: 99;
}

#suggest-list li {
  padding: 8px 12px;
  cursor: pointer;
}
#suggest-list li:hover { background: #f0f0ff; }

.search-highlight { font-weight: 700; color: #2f1fa6; }

/* ===== PAGINATION ===== */
#pagination {
  text-align: center;
  margin: 30px 0;
}

.page-btn {
  padding: 8px 14px;
  margin: 0 5px;
  border-radius: 6px;
  background: #f3eaff;
  cursor: pointer;
  font-weight: 600;
}

.page-btn.active {
  background: #d7caff;
}

/* DARK MODE */
body.dark { background: #1a1a1a; color: #eee; }
body.dark nav a { color: white; }
body.dark .post-card { background: #333; border-color: #555; }
body.dark footer { background: #222; }

/* FOOTER */
footer {
  text-align:center; padding:25px; margin-top:40px;
  background:#fef6ff; border-top:1px solid #e9d8f2;
}
</style>

<script>
/* =========================
   BI·∫æN TO√ÄN C·ª§C
========================= */
let POSTS = [];
let FILTER_CATEGORY = null;
let CURRENT_PAGE = 1;
const POSTS_PER_PAGE = 5;

/* =========================
   LOAD POSTS
========================= */
async function loadPosts(filter = null) {
  FILTER_CATEGORY = filter;
  CURRENT_PAGE = 1;

  const res = await fetch("/binh-blog/posts/posts.json");
  let posts = await res.json();

  // S·∫Øp x·∫øp b√†i m·ªõi ‚Üí c≈©
  posts.sort((a, b) => new Date(b.date) - new Date(a.date));

  // N·∫øu l·ªçc chuy√™n m·ª•c
  if (filter) {
    posts = posts.filter(p => p.category === filter);
  }

  POSTS = posts;
  renderPage(1);
  renderPagination();
}

/* =========================
   RENDER PAGE
========================= */
function renderPage(page) {
  CURRENT_PAGE = page;
  const start = (page - 1) * POSTS_PER_PAGE;
  const end = start + POSTS_PER_PAGE;

  const displayPosts = POSTS.slice(start, end);
  const container = document.getElementById("post-list");
  container.innerHTML = "";

  displayPosts.forEach(post => {
    container.innerHTML += `
      <article class="post-card">
        <img src="${post.thumbnail}" alt="${post.title}">
        <div class="post-info">
          <h2>${post.title}</h2>
          <p class="desc">${post.description}</p>
          <p class="date">üìÖ ${post.date}</p>
          <a href="/binh-blog/posts/${post.file}" class="btn">ƒê·ªçc b√†i ‚Üí</a>
        </div>
      </article>
    `;
  });
}

/* =========================
   PH√ÇN TRANG
========================= */
function renderPagination() {
  const totalPages = Math.ceil(POSTS.length / POSTS_PER_PAGE);
  const pag = document.getElementById("pagination");
  pag.innerHTML = "";

  if (totalPages <= 1) return;

  if (CURRENT_PAGE > 1) {
    pag.innerHTML += `<span class="page-btn" onclick="renderPage(${CURRENT_PAGE - 1})">‚Üê Tr∆∞·ªõc</span>`;
  }

  for (let i = 1; i <= totalPages; i++) {
    pag.innerHTML += `
      <span class="page-btn ${i === CURRENT_PAGE ? "active" : ""}" 
            onclick="renderPage(${i})">${i}</span>
    `;
  }

  if (CURRENT_PAGE < totalPages) {
    pag.innerHTML += `<span class="page-btn" onclick="renderPage(${CURRENT_PAGE + 1})">Ti·∫øp ‚Üí</span>`;
  }
}

/* =========================
   SEARCH G·ª¢I √ù + T√åM N√ÇNG CAO
========================= */
let lastKeyword = "";

function enableSearch() {
  const searchBox = document.getElementById("search");
  const suggestList = document.getElementById("suggest-list");

  searchBox.addEventListener("input", () => {
    const q = searchBox.value.trim().toLowerCase();
    lastKeyword = q;

    if (!q) {
      suggestList.style.display = "none";
      return;
    }

    const results = searchPosts(q, 6);
    renderSuggest(results, q);
  });

  function renderSuggest(list, q) {
    if (list.length === 0) {
      suggestList.style.display = "none";
      return;
    }

    suggestList.innerHTML = list
      .map(post => `
        <li onclick="location.href='/binh-blog/posts/${post.file}'">
          ${highlight(post.title, q)}
          <div style="font-size:12px;color:#888">${post.category} ‚Ä¢ ${post.date}</div>
        </li>
      `)
      .join("");

    suggestList.style.display = "block";
  }

  function highlight(text, keyword) {
    const idx = text.toLowerCase().indexOf(keyword);
    if (idx < 0) return text;
    return (
      text.substring(0, idx) +
      "<span class='search-highlight'>" +
      text.substring(idx, idx + keyword.length) +
      "</span>" +
      text.substring(idx + keyword.length)
    );
  }
}

/* =========================
   SEARCH RANKING
========================= */
function searchPosts(keyword, limit = 6) {
  const q = keyword.toLowerCase();
  const scored = POSTS.map(p => {
    let score = 0;

    if (p.title.toLowerCase().includes(q)) score += 60;
    if (p.description.toLowerCase().includes(q)) score += 20;
    if ((p.category || "").toLowerCase().includes(q)) score += 15;

    return { p, score };
  });

  return scored
    .filter(x => x.score > 0)
    .sort((a, b) => b.score - a.score)
    .slice(0, limit)
    .map(x => x.p);
}

/* =========================
   DARK MODE
========================= */
const toggleBtn = document.getElementById("theme-toggle");
if (localStorage.getItem("theme") === "dark") {
  document.body.classList.add("dark");
  toggleBtn.textContent = "Light Mode";
}

toggleBtn.addEventListener("click", () => {
  document.body.classList.toggle("dark");
  const isDark = document.body.classList.contains("dark");
  toggleBtn.textContent = isDark ? "Light Mode" : "Dark Mode";
  localStorage.setItem("theme", isDark ? "dark" : "light");
});

/* =========================
   HAMBURGER MENU
========================= */
const ham = document.getElementById("hamburger");
const nav = document.querySelector("nav");

ham.addEventListener("click", () => {
  nav.classList.toggle("show");
});

document.addEventListener("click", e => {
  if (!nav.contains(e.target) && !ham.contains(e.target)) {
    nav.classList.remove("show");
  }
});

/* =========================
   KH·ªûI ƒê·ªòNG TRANG
========================= */
loadPosts();      // HI·ªÇN TH·ªä B√ÄI VI·∫æT
enableSearch();   // B·∫¨T SEARCH
</script>
</body>
</html>